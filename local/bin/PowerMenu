#!/usr/bin/env bash
set -euo pipefail

lock() { :; }
logout() { hyprctl dispatch exit; }
suspend() { MediaControl --stop && systemctl suspend; }
reboot() { systemctl reboot; }
poweroff() { systemctl poweroff; }

declare -A ACTIONS=(
  ["󰍁"]=lock
  ["󰗽"]=logout
  [""]=suspend
  ["󰜉"]=reboot
  ["󰐥"]=poweroff
)

# stupid but it gets same order as keys
mapfile -t fixed < <(printf "%s\n" "${!ACTIONS[@]}" | tac)
tmp=${fixed[0]}
fixed[0]=${fixed[3]}
fixed[3]=$tmp

chosen=$(
  printf "%s\n" "${fixed[@]}" |
    rofi -dmenu -no-click-to-exit \
      -theme "$HOME/.config/rofi/PowerMenu.rasi"
)

[[ -n "$chosen" ]] && "${ACTIONS[$chosen]}"
